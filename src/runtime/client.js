(function(){'use strict';document.addEventListener('click',function(e){const btn=e.target.closest('[data-post]');if(!btn)return;e.preventDefault();const url=btn.getAttribute('data-post'),target=btn.getAttribute('data-target'),swap=btn.getAttribute('data-swap')||'innerHTML';fetch(url,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({})}).then(r=>r.text()).then(html=>{if(target){const el=document.querySelector(target);if(el){if(swap==='outerHTML')el.outerHTML=html;else if(swap==='beforeend')el.insertAdjacentHTML('beforeend',html);else el.innerHTML=html}}}).catch(e=>console.error('Request failed:',e))});document.addEventListener('click',function(e){const link=e.target.closest('[data-get]');if(!link)return;e.preventDefault();const url=link.getAttribute('data-get'),target=link.getAttribute('data-target'),swap=link.getAttribute('data-swap')||'innerHTML';fetch(url).then(r=>r.text()).then(html=>{if(target){const el=document.querySelector(target);if(el){if(swap==='outerHTML')el.outerHTML=html;else if(swap==='beforeend')el.insertAdjacentHTML('beforeend',html);else el.innerHTML=html}}}).catch(e=>console.error('Request failed:',e))});document.addEventListener('submit',function(e){const form=e.target.closest('[data-post]');if(!form)return;e.preventDefault();const url=form.getAttribute('data-post'),target=form.getAttribute('data-target'),swap=form.getAttribute('data-swap')||'innerHTML',data={};new FormData(form).forEach((v,k)=>data[k]=v);fetch(url,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(data)}).then(r=>r.text()).then(html=>{if(target){const el=document.querySelector(target);if(el){if(swap==='outerHTML')el.outerHTML=html;else if(swap==='beforeend')el.insertAdjacentHTML('beforeend',html);else el.innerHTML=html}}form.reset()}).catch(e=>console.error('Form failed:',e))});document.addEventListener('change',function(e){const cb=e.target;if(cb.type!=='checkbox'||!cb.hasAttribute('data-post'))return;const url=cb.getAttribute('data-post'),target=cb.getAttribute('data-target'),swap=cb.getAttribute('data-swap')||'outerHTML';fetch(url,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({checked:cb.checked})}).then(r=>r.text()).then(html=>{if(target){const el=document.querySelector(target);if(el){if(swap==='outerHTML')el.outerHTML=html;else el.innerHTML=html}}}).catch(e=>console.error('Checkbox failed:',e))});document.addEventListener('DOMContentLoaded',function(){document.querySelectorAll('[data-trigger="load"]').forEach(function(el){const url=el.getAttribute('data-get');if(!url)return;fetch(url).then(r=>r.text()).then(html=>{const swap=el.getAttribute('data-swap')||'innerHTML';if(swap==='outerHTML')el.outerHTML=html;else el.innerHTML=html}).catch(e=>console.error('Load failed:',e))})});document.addEventListener('click',function(e){const btn=e.target.closest('[data-delete]');if(!btn)return;e.preventDefault();const url=btn.getAttribute('data-delete'),target=btn.getAttribute('data-target');fetch(url,{method:'DELETE',headers:{'Content-Type':'application/json'}}).then(()=>{if(target){const el=document.querySelector(target);if(el)el.remove()}}).catch(e=>console.error('Delete failed:',e))})})();